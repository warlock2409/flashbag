<div class="min-h-screen antialiased text-neutral-900 bg-white">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-24">
        <!-- Top Bar -->
        <header class="flex items-center justify-between gap-4">
            <div class="flex items-start gap-3">
                <div
                    class="h-9 w-9 rounded-md bg-blue-200 ring-1 ring-inset ring-neutral-200 grid place-items-center mt-1">
                    <span class="text-sm font-semibold tracking-tight"
                        style="font-family: 'Inter', ui-sans-serif, system-ui; letter-spacing: -0.02em;">CI</span>
                </div>
                <div>
                    <h1 class="text-xl sm:text-2xl font-semibold tracking-tight text-neutral-900"
                        style="font-family: 'Inter', ui-sans-serif, system-ui; letter-spacing: -0.02em;margin: 0;">
                        Check In
                    </h1>
                    <p class="text-xs text-neutral-600">
                        Scan the QR to mark today's attendance and view your progress
                    </p>
                </div>
            </div>

            <div class="flex items-center gap-2 sm:gap-3">
                <button id="open-customer-modal" (click)="openCheckInDialog()"
                    class="inline-flex items-center gap-2 rounded-md bg-neutral-900 text-white px-3.5 py-2 text-sm font-medium hover:bg-neutral-800 transition-colors">
                    Show Customer
                </button>
            </div>
        </header>

        <!-- Controls (Session status) -->
        <section class="mt-6 flex flex-col md:flex-row md:items-center gap-3 md:gap-4">
            <div class="flex gap-2">
                <input [(ngModel)]="typedText" type="text" placeholder="Enter check-in code" style="font-size: 1.4rem;"
                    class="placeholder-gray-500 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-violet-400 focus:ring-violet-400 focus:outline-none">
            </div>
            <div id="scan-status"
                class="md:ml-auto inline-flex items-center gap-2 rounded-md bg-neutral-50 ring-1 ring-inset ring-neutral-200 px-3 py-1.5 text-sm text-neutral-700">
                <span class="inline-flex h-1.5 w-1.5 rounded-full bg-amber-500"></span>
                Waiting for scan
            </div>
        </section>

        <!-- Main Content (Desktop) -->
        <section class="mt-7 hidden md:block rounded-xl bg-white ring-1 ring-inset ring-neutral-200 overflow-hidden">

            <div class="grid grid-cols-12">
                <!-- Left: QR -->
                <div class="col-span-5 border-r border-neutral-200">
                    <div class="p-6">
                        <div id="qr-panel">
                            <h2 class="text-lg font-semibold tracking-tight text-neutral-900"
                                style="letter-spacing: -0.02em;">Scan to Check In</h2>
                            <p class="mt-1 text-sm text-neutral-600">Open your 9Myle app and scan the code below.
                            </p>

                            <div class="mt-5 rounded-xl ring-1 ring-inset ring-neutral-200 bg-neutral-50 p-4">
                                <div
                                    class="bg-white rounded-lg ring-1 ring-inset ring-neutral-200 p-1 grid place-items-center">

                                    <canvas id="qr-canvas" class="w-full h-auto max-w-[350px] aspect-square"
                                        #qrCanvas></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right: Advertisement (kept for ads) -->
                <div class="col-span-7">
                    <!-- Advertisement block -->
                    <div class="p-6 flex items-center h-full justify-center">
                        <div class="rounded-lg ring-1 ring-inset ring-neutral-200 overflow-hidden bg-red-50">
                            <div class="flex items-center">
                                <div class="aspect-[16/9] bg-white">
                                    <img src="https://img.freepik.com/premium-vector/hiking-banner-template_23-2148964194.jpg"
                                        alt="" srcset="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </section>

        <!-- Mobile Stack -->
        <section class="mt-6 space-y-4 md:hidden">
            <!-- QR Card -->
            <article class="rounded-xl bg-white ring-1 ring-inset ring-neutral-200 p-4">
                <div id="qr-panel-m">
                    <div class="flex items-center justify-between gap-3">
                        <h3 class="text-base font-semibold tracking-tight text-neutral-900"
                            style="letter-spacing: -0.02em;">Scan to Check In</h3>
                        <div
                            class="inline-flex items-center gap-1.5 rounded-full bg-neutral-50 ring-1 ring-inset ring-neutral-200 px-2 py-0.5 text-xs text-neutral-700">
                            <svg data-lucide="clock" class="w-3.5 h-3.5"></svg>
                            <span id="expiry-label-m">Expires in —</span>
                        </div>
                    </div>
                    <div class="mt-4 rounded-lg ring-1 ring-inset ring-neutral-200 bg-neutral-50 p-3">
                        <div class="bg-white rounded-md ring-1 ring-inset ring-neutral-200 p-3 grid place-items-center">
                            <canvas id="qr-canvas" class="w-full h-auto max-w-[350px] aspect-square" #qrCanvas></canvas>
                        </div>
                    </div>
                </div>

                <div id="checked-in-panel-m" class="hidden">
                    <div class="flex items-center gap-2 text-emerald-700 text-sm font-medium">
                        <svg data-lucide="check-circle-2" class="w-4 h-4"></svg>
                        Attendance confirmed
                    </div>
                    <p class="mt-1 text-sm text-neutral-600" id="checked-in-time-m">—</p>
                </div>
            </article>


        </section>

        <!-- Hidden: helper toast -->
        <div id="toast" class="fixed bottom-4 left-1/2 -translate-x-1/2 z-50 hidden">
            <div class="rounded-md bg-neutral-900 text-white text-sm px-3 py-2 shadow/50 shadow-black/50">
                Copied link to clipboard
            </div>
        </div>
    </div>
</div>