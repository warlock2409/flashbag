<!-- Dialog Overlay -->
<div id="serviceDialog" class="fixed inset-0 backdrop-blur-sm flex items-center justify-center p-4 z-50">

    <div class="bg-white rounded-xl shadow-2xl w-full max-w-xl max-h-[90vh] flex flex-col dialog-animate">

        <!-- Dialog Header -->
        <div class="flex justify-between items-center border-b border-gray-200 py-3 px-3">
            <h2 class="text-lg font-semibold text-gray-800 m-0">Add New Service</h2>
            <button (click)="closeDialog()" class="text-gray-400 hover:text-red-500 cursor-pointer">
                <mat-icon style="color: lightcoral;">cancel</mat-icon>
            </button>
        </div>

        <!-- Dialog Content -->
        <div class="flex-1 overflow-y-auto p-6 space-y-6">
            <form [formGroup]="serviceForm" class="space-y-6">

                <!-- Service Name -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        Service Name <span class="text-red-500">*</span>
                    </label>
                    <input formControlName="serviceName" type="text" placeholder="Enter service name"
                        class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-violet-400 focus:ring-violet-400 focus:outline-none">
                </div>

                <!-- Industry & Segment -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            Industry <span class="text-red-500">*</span>
                        </label>
                        <select formControlName="industryId"
                            (change)="onIndustryChange(serviceForm.get('industryId')?.value)"
                            class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-violet-400 focus:ring-violet-400">
                            <option value="">Select Industry</option>
                            <option *ngFor="let industry of industries" [value]="industry.id">{{ industry.name }}
                            </option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            Segment <span class="text-red-500">*</span>
                        </label>
                        <select formControlName="segmentId"
                            class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-violet-400 focus:ring-violet-400"
                            [disabled]="!selectedSegment || selectedSegment.length === 0">
                            <option value="">Select Segment</option>
                            <option *ngFor="let segment of selectedSegment" [value]="segment.id">{{ segment.name }}
                            </option>
                        </select>
                    </div>
                </div>

                <!-- Price Type & Price -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            Price Type <span class="text-red-500">*</span>
                        </label>
                        <select formControlName="priceType"
                            class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-violet-400 focus:ring-violet-400">
                            <option value="">Select Price Type</option>
                            <option value="FREE">Free</option>
                            <option value="FROM">From</option>
                            <option value="FIXED">Fixed</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            Price (INR)
                        </label>
                        <input formControlName="price" type="number" min="0" step="0.01"
                            class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-violet-400 focus:ring-violet-400">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            Service Type <span class="text-red-500">*</span>
                        </label>
                        <select formControlName="serviceType"
                            class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-violet-400 focus:ring-violet-400">
                            <option value="">Select Service Type</option>
                            <option value="BOOKABLE">Bookable</option>
                            <option value="FACILITY">Facility</option>
                            <option value="VIRTUAL">Virtual</option>
                        </select>
                    </div>
                    <!-- Duration -->

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            Duration (minutes) <span class="text-red-500">*</span>
                        </label>
                        <input formControlName="duration" type="number" min="5"
                            class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-violet-400 focus:ring-violet-400">
                    </div>
                </div>
                <!-- <div class="mt-4 text-center">
                    <button mat-stroked-button (click)="generateAiContent()">âœ¨Auto Generate</button>
                </div> -->
                <!-- Description -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        Description <span class="text-red-500">*</span>
                    </label>
                    <textarea formControlName="description" rows="3"
                        class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-violet-400 focus:ring-violet-400"></textarea>
                </div>

                <!-- Shops -->
                <div *ngIf="shops.length > 0">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Map to Shops</label>
                    <div class="space-y-2" formArrayName="shops">
                        <div *ngFor="let shop of shops; let i = index">
                            <input type="checkbox" [formControlName]="i" [id]="'shop-'+i">
                            <label [for]="'shop-'+i" class="ml-2">{{ shop.name }}</label>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <!-- Dialog Footer -->
        <div class="border-t border-gray-200 p-4 flex justify-end space-x-3">
            <div class="space-x-3 flex gap-2">
                <button mat-stroked-button mat-dialog-close (click)="closeDialog()">Cancel</button>
                <button mat-raised-button style="background-color: #a684ff; color: white;" (click)="createService()"
                    *ngIf="!data.isUpdate">Confirm</button>
                <button mat-raised-button style="background-color: #a684ff; color: white;" (click)="updateService()"
                    *ngIf="data.isUpdate">Update</button>
            </div>
        </div>

    </div>
</div>

<!-- <div class="antialiased bg-[#0B0D12] text-white/90 font-sans"
    style="font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, Apple Color Emoji, Segoe UI Emoji;">
    <div
        class="rounded-xl border border-white/10 bg-gradient-to-b from-white/[0.06] to-white/[0.02] p-3 md:p-4 shadow-2xl ring-1 ring-white/10">
        <div class="rounded-lg border border-white/10 bg-black/30 overflow-hidden">
            <div class="flex items-center gap-2 px-3 py-2 border-b border-white/10">
                <div class="flex gap-1.5">
                    <span class="h-2.5 w-2.5 rounded-full bg-red-500/70"></span>
                    <span class="h-2.5 w-2.5 rounded-full bg-yellow-500/70"></span>
                    <span class="h-2.5 w-2.5 rounded-full bg-green-500/70"></span>
                </div>
                <div class="ml-auto text-xs text-white/50">Unified Dashboard</div>
            </div>
            <div class="grid md:grid-cols-5">
                <aside class="md:col-span-2 border-r border-white/10 p-3 sm:p-4">
                    <div class="space-y-2">
                        <button
                            class="w-full inline-flex items-center gap-2 px-3 py-2 rounded-md text-sm bg-white/10 ring-1 ring-white/15 hover:ring-white/25 transition">
                            <i data-lucide="layout-grid" class="w-4 h-4"></i> Overview
                        </button>
                        <button
                            class="w-full inline-flex items-center gap-2 px-3 py-2 rounded-md text-sm text-white/80 hover:text-white hover:bg-white/5 ring-1 ring-white/10 hover:ring-white/20 transition">
                            <i data-lucide="package" class="w-4 h-4"></i> Products
                        </button>
                        <button
                            class="w-full inline-flex items-center gap-2 px-3 py-2 rounded-md text-sm text-white/80 hover:text-white hover:bg-white/5 ring-1 ring-white/10 hover:ring-white/20 transition">
                            <i data-lucide="key" class="w-4 h-4"></i> Rentals
                        </button>
                        <button
                            class="w-full inline-flex items-center gap-2 px-3 py-2 rounded-md text-sm text-white/80 hover:text-white hover:bg-white/5 ring-1 ring-white/10 hover:ring-white/20 transition">
                            <i data-lucide="wrench" class="w-4 h-4"></i> Services
                        </button>
                        <button
                            class="w-full inline-flex items-center gap-2 px-3 py-2 rounded-md text-sm text-white/80 hover:text-white hover:bg-white/5 ring-1 ring-white/10 hover:ring-white/20 transition">
                            <i data-lucide="users" class="w-4 h-4"></i> Customers
                        </button>
                        <button
                            class="w-full inline-flex items-center gap-2 px-3 py-2 rounded-md text-sm text-white/80 hover:text-white hover:bg-white/5 ring-1 ring-white/10 hover:ring-white/20 transition">
                            <i data-lucide="settings" class="w-4 h-4"></i> Settings
                        </button>
                    </div>
                </aside>
                <div class="md:col-span-3 p-3 sm:p-4 space-y-4">
                    <div class="grid sm:grid-cols-3 gap-3">
                        <div class="rounded-lg border border-white/10 bg-white/[0.03] p-3">
                            <div class="text-xs text-white/50">GMV (30d)</div>
                            <div class="mt-1 text-xl font-semibold tracking-tight">$84,240</div>
                            <div
                                class="mt-2 inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-300 text-[11px] ring-1 ring-emerald-500/20">
                                <i data-lucide="trending-up" class="w-3.5 h-3.5"></i> +12.4%
                            </div>
                        </div>
                        <div class="rounded-lg border border-white/10 bg-white/[0.03] p-3">
                            <div class="text-xs text-white/50">Active rentals</div>
                            <div class="mt-1 text-xl font-semibold tracking-tight">318</div>
                            <div
                                class="mt-2 inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-sky-500/10 text-sky-300 text-[11px] ring-1 ring-sky-500/20">
                                <i data-lucide="clock" class="w-3.5 h-3.5"></i> Avg 4.2 days
                            </div>
                        </div>
                        <div class="rounded-lg border border-white/10 bg-white/[0.03] p-3">
                            <div class="text-xs text-white/50">Service bookings</div>
                            <div class="mt-1 text-xl font-semibold tracking-tight">1,142</div>
                            <div
                                class="mt-2 inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-violet-500/10 text-violet-300 text-[11px] ring-1 ring-violet-500/20">
                                <i data-lucide="sparkles" class="w-3.5 h-3.5"></i> 98.2% fill
                            </div>
                        </div>
                    </div>

                    <div class="rounded-lg border border-white/10 bg-white/[0.03] p-3">
                        <h3 class="text-sm font-medium tracking-tight">Demand trends</h3>
                        <p class="text-xs text-white/50">Products vs Rentals vs Services (last 6 weeks)</p>
                        <div class="mt-2 rounded-md border border-white/10 bg-black/30 p-2">
                            <div class="relative">
                                <div class="h-[220px]">
                                    <canvas id="kpiChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid sm:grid-cols-3 gap-3">
                        <div class="rounded-lg overflow-hidden border border-white/10">
                            <img src="https://images.unsplash.com/photo-1484704849700-f032a568e944?q=80&w=1200&auto=format&fit=crop"
                                alt="Mirrorless camera product" class="h-28 w-full object-cover" />
                            <div class="p-3">
                                <div class="text-sm font-medium tracking-tight">Zeno Mirrorless X2</div>
                                <div class="text-xs text-white/50">$1,299 â€¢ In stock</div>
                            </div>
                        </div>
                        <div class="rounded-lg overflow-hidden border border-white/10">
                            <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?q=80&w=1200&auto=format&fit=crop"
                                alt="Modern apartment rental" class="h-28 w-full object-cover" />
                            <div class="p-3">
                                <div class="text-sm font-medium tracking-tight">Loft â€¢ Downtown</div>
                                <div class="text-xs text-white/50">$129/night â€¢ 4.9â˜…</div>
                            </div>
                        </div>
                        <div class="rounded-lg overflow-hidden border border-white/10">
                            <img src="https://images.unsplash.com/photo-1520975916090-3105956dac38?q=80&w=1200&auto=format&fit=crop"
                                alt="Professional service provider" class="h-28 w-full object-cover" />
                            <div class="p-3">
                                <div class="text-sm font-medium tracking-tight">Pro Electrician</div>
                                <div class="text-xs text-white/50">From $75/hr â€¢ 5.0â˜…</div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div> -->